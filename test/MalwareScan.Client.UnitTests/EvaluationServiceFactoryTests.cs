using System;
using FluentAssertions;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using Moq;

namespace MalwareScan.Client.UnitTests
{
	[TestClass]
	public class EvaluationServiceFactoryTests
	{
		const string DefaultUrl = "http://127.0.0.1/eval/";

		[TestMethod]
		public void CreateEvaluationService_Throws_ArgumentNullException_Given_NullUrl()
		{
			#region Arrange

			var mockRepository = new MockRepository(MockBehavior.Strict);

			#endregion

			#region Act

			Action act = () => EvaluationServiceFactory.CreateEvaluationService(null);

			#endregion

			#region Assert

			act.Should().ThrowExactly<ArgumentNullException>("a non-null value is required for the evaluation service URL");

			#endregion
		}

		[TestMethod]
		public void CreateEvaluationService_Returns_EvaluationService_Given_Url()
		{
			#region Arrange

			var mockRepository = new MockRepository(MockBehavior.Strict);

			#endregion

			#region Act

			IEvaluationService evaluationService = EvaluationServiceFactory.CreateEvaluationService(DefaultUrl);

			#endregion

			#region Assert

			evaluationService.Should().NotBeNull("evaluation service should not be null");

			#endregion
		}
	}
}
